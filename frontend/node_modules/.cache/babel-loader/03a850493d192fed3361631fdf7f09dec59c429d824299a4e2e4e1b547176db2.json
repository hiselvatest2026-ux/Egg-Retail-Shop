{"ast":null,"code":"import _objectSpread from\"/workspace/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{getSales,createSale,deleteSale}from'../api/api';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sales=()=>{const[sales,setSales]=useState([]);const[form,setForm]=useState({customer_id:'',total:''});const fetchSales=async()=>{const res=await getSales();setSales(res.data);};useEffect(()=>{fetchSales();},[]);const handleSubmit=async e=>{e.preventDefault();if(!form.customer_id||!form.total)return;await createSale({customer_id:Number(form.customer_id),total:Number(form.total)});setForm({customer_id:'',total:''});fetchSales();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-4\",children:\"Sales\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex gap-2 items-end mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm\",children:\"Customer ID\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2\",value:form.customer_id,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{customer_id:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm\",children:\"Total\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2\",value:form.total,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{total:e.target.value}))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 text-white px-3 py-2 rounded\",type:\"submit\",children:\"Add Sale\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full mt-4 border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sales.map(s=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.id}),/*#__PURE__*/_jsx(\"td\",{children:s.customer_id}),/*#__PURE__*/_jsx(\"td\",{children:s.total}),/*#__PURE__*/_jsxs(\"td\",{className:\"space-x-2\",children:[/*#__PURE__*/_jsx(Link,{className:\"bg-gray-700 text-white px-2 py-1 rounded\",to:\"/invoice/\".concat(s.id),children:\"Invoice\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-2 py-1 rounded\",onClick:async()=>{await deleteSale(s.id);fetchSales();},children:\"Delete\"})]})]},s.id))})]})]});};export default Sales;","map":{"version":3,"names":["React","useEffect","useState","getSales","createSale","deleteSale","Link","jsx","_jsx","jsxs","_jsxs","Sales","sales","setSales","form","setForm","customer_id","total","fetchSales","res","data","handleSubmit","e","preventDefault","Number","className","children","onSubmit","value","onChange","_objectSpread","target","type","map","s","id","to","concat","onClick"],"sources":["/workspace/frontend/src/pages/Sales.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getSales, createSale, deleteSale } from '../api/api';\nimport { Link } from 'react-router-dom';\n\nconst Sales = () => {\n  const [sales, setSales] = useState([]);\n  const [form, setForm] = useState({ customer_id: '', total: '' });\n\n  const fetchSales = async () => {\n    const res = await getSales();\n    setSales(res.data);\n  };\n\n  useEffect(() => { fetchSales(); }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!form.customer_id || !form.total) return;\n    await createSale({ customer_id: Number(form.customer_id), total: Number(form.total) });\n    setForm({ customer_id: '', total: '' });\n    fetchSales();\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">Sales</h1>\n\n      <form onSubmit={handleSubmit} className=\"flex gap-2 items-end mb-4\">\n        <div>\n          <label className=\"block text-sm\">Customer ID</label>\n          <input className=\"border p-2\" value={form.customer_id} onChange={e=>setForm({...form, customer_id: e.target.value})} />\n        </div>\n        <div>\n          <label className=\"block text-sm\">Total</label>\n          <input className=\"border p-2\" value={form.total} onChange={e=>setForm({...form, total: e.target.value})} />\n        </div>\n        <button className=\"bg-green-600 text-white px-3 py-2 rounded\" type=\"submit\">Add Sale</button>\n      </form>\n\n      <table className=\"w-full mt-4 border\">\n        <thead>\n          <tr><th>ID</th><th>Customer</th><th>Total</th><th>Actions</th></tr>\n        </thead>\n        <tbody>\n          {sales.map(s => (\n            <tr key={s.id}>\n              <td>{s.id}</td>\n              <td>{s.customer_id}</td>\n              <td>{s.total}</td>\n              <td className=\"space-x-2\">\n                <Link className=\"bg-gray-700 text-white px-2 py-1 rounded\" to={`/invoice/${s.id}`}>Invoice</Link>\n                <button className=\"bg-red-500 text-white px-2 py-1 rounded\" onClick={async()=>{ await deleteSale(s.id); fetchSales(); }}>Delete</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default Sales;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}