{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{Link}from'react-router-dom';import{getDashboard}from'../api/api';import{Line,Bar}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,BarElement,Title,Tooltip,Legend}from'chart.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,BarElement,Title,Tooltip,Legend);const Card=_ref=>{let{title,value}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-4 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold\",children:value})]});};const Dashboard=()=>{var _data$metrics,_data$metrics2,_data$metrics3;const[data,setData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{(async()=>{const res=await getDashboard();setData(res.data);setLoading(false);})();},[]);const salesTrendChart=useMemo(()=>{var _data$sales_trend$map,_data$sales_trend,_data$sales_trend$map2,_data$sales_trend2;const labels=(_data$sales_trend$map=data===null||data===void 0?void 0:(_data$sales_trend=data.sales_trend)===null||_data$sales_trend===void 0?void 0:_data$sales_trend.map(d=>d.day))!==null&&_data$sales_trend$map!==void 0?_data$sales_trend$map:[];const values=(_data$sales_trend$map2=data===null||data===void 0?void 0:(_data$sales_trend2=data.sales_trend)===null||_data$sales_trend2===void 0?void 0:_data$sales_trend2.map(d=>d.total))!==null&&_data$sales_trend$map2!==void 0?_data$sales_trend$map2:[];return{labels,datasets:[{label:'Sales (last 7 days)',data:values,borderColor:'rgb(37, 99, 235)',backgroundColor:'rgba(37, 99, 235, .3)'}]};},[data]);const lowStockChart=useMemo(()=>{var _data$low_stock$map,_data$low_stock,_data$low_stock$map2,_data$low_stock2;const labels=(_data$low_stock$map=data===null||data===void 0?void 0:(_data$low_stock=data.low_stock)===null||_data$low_stock===void 0?void 0:_data$low_stock.map(d=>d.name))!==null&&_data$low_stock$map!==void 0?_data$low_stock$map:[];const values=(_data$low_stock$map2=data===null||data===void 0?void 0:(_data$low_stock2=data.low_stock)===null||_data$low_stock2===void 0?void 0:_data$low_stock2.map(d=>d.stock))!==null&&_data$low_stock$map2!==void 0?_data$low_stock$map2:[];return{labels,datasets:[{label:'Stock',data:values,backgroundColor:'rgba(16, 185, 129, .5)'}]};},[data]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:\"Loading dashboard...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsx(Card,{title:\"Total Sales Today\",value:\"\\u20B9 \".concat(Number((data===null||data===void 0?void 0:(_data$metrics=data.metrics)===null||_data$metrics===void 0?void 0:_data$metrics.total_sales_today)||0).toFixed(2))}),/*#__PURE__*/_jsx(Card,{title:\"Current Stock Level\",value:Number((data===null||data===void 0?void 0:(_data$metrics2=data.metrics)===null||_data$metrics2===void 0?void 0:_data$metrics2.current_stock_level)||0)}),/*#__PURE__*/_jsx(Card,{title:\"Pending Orders\",value:Number((data===null||data===void 0?void 0:(_data$metrics3=data.metrics)===null||_data$metrics3===void 0?void 0:_data$metrics3.pending_orders)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mb-6\",children:[/*#__PURE__*/_jsx(Link,{className:\"bg-blue-600 text-white px-3 py-2 rounded\",to:\"/purchases\",children:\"Go to Purchase\"}),/*#__PURE__*/_jsx(Link,{className:\"bg-blue-600 text-white px-3 py-2 rounded\",to:\"/sales\",children:\"Go to Sales\"}),/*#__PURE__*/_jsx(Link,{className:\"bg-blue-600 text-white px-3 py-2 rounded\",to:\"/products\",children:\"Go to Inventory\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold mb-2\",children:\"Sales Trend\"}),/*#__PURE__*/_jsx(Line,{data:salesTrendChart,options:{responsive:true,plugins:{legend:{position:'top'}}}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold mb-2\",children:\"Low/Current Stock by Product\"}),/*#__PURE__*/_jsx(Bar,{data:lowStockChart,options:{responsive:true,plugins:{legend:{position:'top'}}}})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","getDashboard","Line","Bar","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","Title","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","Card","_ref","title","value","className","children","Dashboard","_data$metrics","_data$metrics2","_data$metrics3","data","setData","loading","setLoading","res","salesTrendChart","_data$sales_trend$map","_data$sales_trend","_data$sales_trend$map2","_data$sales_trend2","labels","sales_trend","map","d","day","values","total","datasets","label","borderColor","backgroundColor","lowStockChart","_data$low_stock$map","_data$low_stock","_data$low_stock$map2","_data$low_stock2","low_stock","name","stock","concat","Number","metrics","total_sales_today","toFixed","current_stock_level","pending_orders","to","options","responsive","plugins","legend","position"],"sources":["/workspace/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getDashboard } from '../api/api';\nimport { Line, Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, BarElement, Title, Tooltip, Legend);\n\nconst Card = ({ title, value }) => (\n  <div className=\"border rounded p-4 shadow-sm\">\n    <div className=\"text-sm text-gray-600\">{title}</div>\n    <div className=\"text-2xl font-bold\">{value}</div>\n  </div>\n);\n\nconst Dashboard = () => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const res = await getDashboard();\n      setData(res.data);\n      setLoading(false);\n    })();\n  }, []);\n\n  const salesTrendChart = useMemo(() => {\n    const labels = data?.sales_trend?.map(d => d.day) ?? [];\n    const values = data?.sales_trend?.map(d => d.total) ?? [];\n    return {\n      labels,\n      datasets: [{ label: 'Sales (last 7 days)', data: values, borderColor: 'rgb(37, 99, 235)', backgroundColor: 'rgba(37, 99, 235, .3)' }]\n    };\n  }, [data]);\n\n  const lowStockChart = useMemo(() => {\n    const labels = data?.low_stock?.map(d => d.name) ?? [];\n    const values = data?.low_stock?.map(d => d.stock) ?? [];\n    return {\n      labels,\n      datasets: [{ label: 'Stock', data: values, backgroundColor: 'rgba(16, 185, 129, .5)' }]\n    };\n  }, [data]);\n\n  if (loading) return <div className=\"p-4\">Loading dashboard...</div>;\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Dashboard</h1>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6\">\n        <Card title=\"Total Sales Today\" value={`â‚¹ ${Number(data?.metrics?.total_sales_today || 0).toFixed(2)}`} />\n        <Card title=\"Current Stock Level\" value={Number(data?.metrics?.current_stock_level || 0)} />\n        <Card title=\"Pending Orders\" value={Number(data?.metrics?.pending_orders || 0)} />\n      </div>\n\n      <div className=\"flex gap-3 mb-6\">\n        <Link className=\"bg-blue-600 text-white px-3 py-2 rounded\" to=\"/purchases\">Go to Purchase</Link>\n        <Link className=\"bg-blue-600 text-white px-3 py-2 rounded\" to=\"/sales\">Go to Sales</Link>\n        <Link className=\"bg-blue-600 text-white px-3 py-2 rounded\" to=\"/products\">Go to Inventory</Link>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className=\"border rounded p-4\">\n          <div className=\"font-semibold mb-2\">Sales Trend</div>\n          <Line data={salesTrendChart} options={{ responsive: true, plugins: { legend: { position: 'top' } } }} />\n        </div>\n        <div className=\"border rounded p-4\">\n          <div className=\"font-semibold mb-2\">Low/Current Stock by Product</div>\n          <Bar data={lowStockChart} options={{ responsive: true, plugins: { legend: { position: 'top' } } }} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}