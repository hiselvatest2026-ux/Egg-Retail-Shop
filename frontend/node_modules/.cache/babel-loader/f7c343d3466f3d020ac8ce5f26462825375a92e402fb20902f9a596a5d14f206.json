{"ast":null,"code":"import _objectSpread from\"/workspace/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{getProducts,createProduct,updateProduct,deleteProduct}from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Products=()=>{const[products,setProducts]=useState([]);const[form,setForm]=useState({name:'',price:'',batch_number:'',expiry_date:''});const[editing,setEditing]=useState(null);const fetchProducts=async()=>{const res=await getProducts();setProducts(res.data);};useEffect(()=>{fetchProducts();},[]);const handleSubmit=async e=>{e.preventDefault();const payload=_objectSpread(_objectSpread({},form),{},{price:form.price?Number(form.price):null});if(editing){await updateProduct(editing,payload);}else{await createProduct(payload);}setForm({name:'',price:'',batch_number:'',expiry_date:''});setEditing(null);fetchProducts();};const startEdit=p=>{setEditing(p.id);setForm({name:p.name||'',price:p.price||'',batch_number:p.batch_number||'',expiry_date:p.expiry_date?p.expiry_date.split('T')[0]:''});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-4\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"grid grid-cols-1 sm:grid-cols-5 gap-2 items-end mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2 w-full\",value:form.name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2 w-full\",value:form.price,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{price:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm\",children:\"Batch\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2 w-full\",value:form.batch_number,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{batch_number:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm\",children:\"Expiry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"border p-2 w-full\",value:form.expiry_date,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{expiry_date:e.target.value}))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 text-white px-3 py-2 rounded\",type:\"submit\",children:editing?'Update':'Add'})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full mt-4 border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Batch\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Expiry\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(p=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.id}),/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:p.price}),/*#__PURE__*/_jsx(\"td\",{children:p.batch_number}),/*#__PURE__*/_jsx(\"td\",{children:p.expiry_date?new Date(p.expiry_date).toLocaleDateString():''}),/*#__PURE__*/_jsxs(\"td\",{className:\"space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-600 text-white px-2 py-1 rounded\",onClick:()=>startEdit(p),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-2 py-1 rounded\",onClick:async()=>{await deleteProduct(p.id);fetchProducts();},children:\"Delete\"})]})]},p.id))})]})]});};export default Products;","map":{"version":3,"names":["React","useEffect","useState","getProducts","createProduct","updateProduct","deleteProduct","jsx","_jsx","jsxs","_jsxs","Products","products","setProducts","form","setForm","name","price","batch_number","expiry_date","editing","setEditing","fetchProducts","res","data","handleSubmit","e","preventDefault","payload","_objectSpread","Number","startEdit","p","id","split","className","children","onSubmit","value","onChange","target","type","map","Date","toLocaleDateString","onClick"],"sources":["/workspace/frontend/src/pages/Products.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getProducts, createProduct, updateProduct, deleteProduct } from '../api/api';\n\nconst Products = () => {\n  const [products, setProducts] = useState([]);\n  const [form, setForm] = useState({ name: '', price: '', batch_number: '', expiry_date: '' });\n  const [editing, setEditing] = useState(null);\n\n  const fetchProducts = async () => { const res = await getProducts(); setProducts(res.data); };\n  useEffect(() => { fetchProducts(); }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const payload = { ...form, price: form.price ? Number(form.price) : null };\n    if (editing) {\n      await updateProduct(editing, payload);\n    } else {\n      await createProduct(payload);\n    }\n    setForm({ name: '', price: '', batch_number: '', expiry_date: '' });\n    setEditing(null);\n    fetchProducts();\n  };\n\n  const startEdit = (p) => {\n    setEditing(p.id);\n    setForm({ name: p.name || '', price: p.price || '', batch_number: p.batch_number || '', expiry_date: p.expiry_date ? p.expiry_date.split('T')[0] : '' });\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">Products</h1>\n      <form onSubmit={handleSubmit} className=\"grid grid-cols-1 sm:grid-cols-5 gap-2 items-end mb-4\">\n        <div>\n          <label className=\"block text-sm\">Name</label>\n          <input className=\"border p-2 w-full\" value={form.name} onChange={e=>setForm({...form, name: e.target.value})} />\n        </div>\n        <div>\n          <label className=\"block text-sm\">Price</label>\n          <input className=\"border p-2 w-full\" value={form.price} onChange={e=>setForm({...form, price: e.target.value})} />\n        </div>\n        <div>\n          <label className=\"block text-sm\">Batch</label>\n          <input className=\"border p-2 w-full\" value={form.batch_number} onChange={e=>setForm({...form, batch_number: e.target.value})} />\n        </div>\n        <div>\n          <label className=\"block text-sm\">Expiry</label>\n          <input type=\"date\" className=\"border p-2 w-full\" value={form.expiry_date} onChange={e=>setForm({...form, expiry_date: e.target.value})} />\n        </div>\n        <button className=\"bg-green-600 text-white px-3 py-2 rounded\" type=\"submit\">{editing ? 'Update' : 'Add'}</button>\n      </form>\n\n      <table className=\"w-full mt-4 border\">\n        <thead><tr><th>ID</th><th>Name</th><th>Price</th><th>Batch</th><th>Expiry</th><th>Actions</th></tr></thead>\n        <tbody>\n          {products.map(p => (\n            <tr key={p.id}>\n              <td>{p.id}</td>\n              <td>{p.name}</td>\n              <td>{p.price}</td>\n              <td>{p.batch_number}</td>\n              <td>{p.expiry_date ? new Date(p.expiry_date).toLocaleDateString() : ''}</td>\n              <td className=\"space-x-2\">\n                <button className=\"bg-blue-600 text-white px-2 py-1 rounded\" onClick={()=>startEdit(p)}>Edit</button>\n                <button className=\"bg-red-500 text-white px-2 py-1 rounded\" onClick={async()=>{ await deleteProduct(p.id); fetchProducts(); }}>Delete</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default Products;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}