@tailwind base;
@tailwind components;
@tailwind utilities;

/* src/index.css */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: #1E1E2F;
  color: #e8eef4;
  line-height: 1.55;
  -webkit-tap-highlight-color: transparent;
  overflow-x: hidden;
  color-scheme: dark;
}
/* Ensure consistent sizing under browser zoom */
*, *::before, *::after { box-sizing: border-box; }
img { max-width: 100%; height: auto; }

:root { --bottom-tabs-height: 60px; --mobile-header-height: 52px; }

/* Simple utility styles */
.btn { display:inline-block; padding:10px 14px; border-radius:10px; color:#08110a; background:#22c55e; text-decoration:none; border:0; cursor:pointer; transition:all .15s ease; box-shadow:0 1px 2px rgba(0,0,0,.15); min-height: 40px; }
.btn:hover { filter:brightness(1.05); transform:translateY(-1px); box-shadow:0 6px 16px rgba(34,197,94,.22); }
.btn:active { transform:translateY(0); box-shadow:0 2px 6px rgba(37,99,235,.15); }
.btn.secondary { background:transparent; color:#e8eef4; border:1px solid #3A3A4D; }
.btn.secondary:hover { background:rgba(59,130,246,.08); border-color:#3B82F6; }
.btn.danger { background:#dc2626; color:#fff; }
.btn.danger:hover { background:#b91c1c; box-shadow:0 6px 16px rgba(220,38,38,.2); }
.btn-sm { padding:8px 10px; border-radius:6px; font-size: 13px; }
.btn-group { display:flex; gap:8px; flex-wrap:wrap; }
.btn.primary { background:#3B82F6; color:#fff; }
.btn.primary { box-shadow: 0 2px 6px rgba(59,130,246,.35); }
.btn.primary:active { box-shadow:0 2px 8px rgba(59,130,246,.35) inset; }
.btn.primary:hover { filter:brightness(1.06); box-shadow:0 6px 16px rgba(59,130,246,.35); }
.btn.icon { background:transparent; color:#cbd5e1; border:1px solid #3A3A4D; }
.btn.icon:hover { background:rgba(59,130,246,.08); color:#fff; border-color:#3B82F6; }

/* Responsive form row (mobile-first) */
.form-row { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.25rem; align-items: end; }
@media (min-width: 768px) { .form-row { grid-template-columns: repeat(2, 1fr); } }
.form-row > * { min-width: 0; }

/* Inputs and dropdowns should shrink properly inside grids */
.input, .ui-dropdown { width: 100%; max-width: 100%; min-width: 0; }

.table { width:100%; border-collapse: collapse; color:#e5e7eb; background:#2A2A3B; }
.table th, .table td { border:1px solid #3A3A4D; padding:14px 16px; text-align:left; }
.table thead th { background:#242435; font-weight:700; color:#cbd5e1; }
.table thead th, .table td, .input, .btn, .ui-dropdown, .ui-dropdown * { font-family: Arial, sans-serif; font-size: 14px; }
.table-hover tbody tr { transition: background-color .12s ease; }
.table-hover tbody tr:hover { background:#242435; }
.table-zebra tbody tr:nth-child(odd) { background:#252537; }
.table-zebra tbody tr:nth-child(even) { background:#2A2A3C; }
/* Mobile-friendly tables */
.table { display: block; overflow-x: auto; white-space: nowrap; }
.table thead th { position: sticky; top: 0; z-index: 1; }
.table td, .table th { height: 56px; vertical-align: middle; }

.sidebar { width:256px; background:#0f172a; color:#e2e8f0; }
.sidebar .brand { padding:16px; font-weight:700; font-size:18px; border-bottom:1px solid #1f2937; }
.sidebar .nav { display:flex; flex-direction:column; gap:8px; padding:16px; }
.sidebar a { display:block; padding:10px 12px; border-radius:8px; color:#e2e8f0; text-decoration:none; }
.sidebar a.active, .sidebar a:hover { background:#1d4ed8; color:#fff; }

.layout { min-height:100vh; display:flex; }
.content { flex:1; padding:24px; }

/* Cards */
.card { background:#2A2A3C; border:1px solid #3A3A4D; border-radius:16px; box-shadow:0 12px 34px rgba(0,0,0,.40); overflow:visible; transition: box-shadow .15s ease, border-color .15s ease; }
.card-header { display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid #3A3A4D; background:#26263A; }
.card-title { font-weight:800; color:#e8eef4; letter-spacing:.2px; }
.card-actions { display:flex; align-items:center; gap:8px; }
.card-body { padding:22px; color:#e5e7eb; }

/* Hover states for web */
.card:hover { box-shadow:0 14px 36px rgba(0,0,0,.45); border-color:#46506a; }

/* Utility for right aligned numbers */
.text-right { text-align: right; }

/* Page header */
.page { padding: 8px; }
.page-header { display:flex; align-items:flex-end; justify-content:space-between; margin-bottom:16px; }
.page-title { margin:0; font-size:24px; font-weight:900; color:#e8eef4; letter-spacing:-0.01em; }
.page-subtitle { margin:4px 0 0; color:#9fb0c2; font-size:14px; }

/* Forms */
.form-grid { display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:18px; align-items:end; }
.input-group { display:flex; flex-direction:column; gap:6px; }
.input-group label { font-size:12px; color:#c4d0dc; font-weight:700; letter-spacing: .02em; }
.input { height:46px; padding:12px 14px; border-radius:14px; border:1px solid #4a556f; background:#434b5f; color:#e8eef4; outline:none; transition:border-color .12s ease, box-shadow .12s ease; width:100%; box-sizing:border-box; font-size:14px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.input.date { background-image:url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2220%22 height=%2220%22 viewBox=%220 0 24 24%22 fill=%22%23cbd5e1%22><path d=%22M7 10h5v5H7z%22/><path d=%22M19 4h-1V2h-2v2H8V2H6v2H5c-1.103 0-2 .897-2 2v13c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 15H5V9h14v10z%22/></svg>'); background-repeat:no-repeat; background-position: right 12px center; padding-right: 38px; }
.input:focus { border-color:#60a5fa; box-shadow:0 0 0 4px rgba(59,130,246,.28); }
.actions-row { display:flex; gap:10px; }
.btn-mobile-full { }
@media (max-width: 640px) { .btn-mobile-full { width: 100%; } }
/* Mobile sticky action bar for forms */
@media (max-width: 640px) {
  .sticky-actions {
    position: sticky;
    bottom: calc(var(--bottom-tabs-height) + 12px);
    z-index: 500;
    background: rgba(38, 38, 58, 0.9);
    backdrop-filter: blur(6px);
    padding: 10px;
    border: 1px solid #3A3A4D;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,.4);
    justify-content: center;
    display: flex;
    gap: 8px;
  }
  .sticky-actions .btn { width: 100%; }
}

@media (min-width: 641px) {
  .sticky-actions {
    position: static;
    bottom: auto;
    background: transparent;
    backdrop-filter: none;
    padding: 0;
    border: 0;
    border-radius: 0;
    box-shadow: none;
  }
  .sticky-actions .btn { width: auto; }
}

/* Two-column form grid utility (stacks to 1 on small screens) */
.form-grid-2 { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px; align-items:end; }
@media (max-width: 640px) { .form-grid-2 { grid-template-columns: 1fr; } }

/* Ensure dropdowns match input sizing */
select.input { height:42px; line-height:42px; padding-right:40px; width:100%; max-width:100%; box-sizing:border-box; appearance:none; -webkit-appearance:none; -moz-appearance:none; background-image: linear-gradient(45deg, transparent 50%, #9fb0c2 50%), linear-gradient(135deg, #9fb0c2 50%, transparent 50%);
  background-position: right 18px center, right 12px center; background-size:6px 6px, 6px 6px; background-repeat:no-repeat; }
select.input::-ms-expand { display:none; }
select.input { position: relative; z-index: 50; }
select.input:focus { z-index: 60; }
select.input option { white-space:normal; color:#ffffff; background-color:#2A2A3C; border:1px solid #3A3A4C; padding:8px 12px; }
select.input option:hover, select.input option:checked, select.input option:focus { background-color:#3A3A4C; color:#ffffff; }
select.input:invalid { color:#9fb0c2; }
select.input optgroup { color:#cbd5e1; background:#1f2330; }

/* Helper: wrap long values on mobile inside visible select box via title attribute tooltip */
label + select.input { cursor:pointer; }

@media (max-width: 640px) {
  select.input { background-image: none; padding-right: 12px; appearance:auto; -webkit-appearance:auto; -moz-appearance:auto; color:inherit; background-color:inherit; }
  select.input option { padding:12px; line-height:44px; min-height:44px; }
  .btn { min-height: 44px; padding: 12px 16px; }
  .input { height: 44px; }
}

/* Badges */
.badge { display:inline-block; padding:4px 8px; border-radius:9999px; background:#1e293b; color:#93c5fd; font-weight:700; font-size:12px; border:1px solid #334155; }
.form-help { font-size:12px; color:#fca5a5; margin-top:4px; }
.toast { margin-top:8px; padding:10px 12px; border-radius:10px; border:1px solid #3A3A4D; background:#26263A; color:#e5e7eb; box-shadow:0 6px 18px rgba(0,0,0,.4); }
.toast.error { background:#fef2f2; color:#991b1b; }

/* Stat cards */
.stat-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:12px; }
.stat { padding:14px; border:1px solid #273140; background:#0f1418; border-radius:12px; box-shadow:0 1px 3px rgba(0,0,0,.25); }
.stat-label { color:#9fb0c2; font-size:12px; font-weight:800; letter-spacing:.06em; text-transform:uppercase; }
.stat-value { margin-top:6px; font-weight:900; color:#e8eef4; font-size:20px; }
.stat.warn { background:#1f1206; border-color:#4d2a0b; }
.stat.danger { background:#2b0d10; border-color:#4b0b12; }
.stat.info { background:#0d1520; border-color:#1e3a5f; }

/* Responsive adjustments */
@media (max-width: 1024px) {
  .layout { flex-direction: column; }
  .sidebar { width: 100%; position: sticky; top: 0; z-index: 30; }
  .sidebar .nav { flex-direction: row; gap: 8px; overflow-x: auto; white-space: nowrap; }
  .sidebar a { flex: 0 0 auto; }
  .content { padding: 16px; }
  .form-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .stat-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 640px) {
  .content { padding: 12px; }
  .card-body { padding: 12px; }
  .card-header { padding: 10px 12px; }
  .page-title { font-size: 20px; }
  .sidebar .brand { font-size: 16px; padding: 12px; }
  .form-grid { grid-template-columns: 1fr; }
  .stat-grid { grid-template-columns: 1fr; }
  .btn-group { gap: 6px; }
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .stat-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  .form-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  .card-body { padding:12px; }
}

@media (max-width: 640px) {
  .stat-grid { grid-template-columns: 1fr; }
  .form-grid { grid-template-columns: 1fr; }
  .card-header { padding:10px 12px; }
  .card-title { font-size:16px; }
  .btn-group { gap:6px; }
}

/* Mobile-only: prevent zoom/shrink on Add Purchase form dropdowns/inputs */
@media (max-width: 640px) {
  .purchase-add-form .input,
  .purchase-add-form select,
  .purchase-add-form .ui-dropdown,
  .purchase-add-form .ui-dropdown * {
    font-size: 16px !important;
  }
  .purchase-add-form .ui-dropdown,
  .purchase-add-form .ui-dropdown > *,
  .purchase-add-form select,
  .purchase-add-form .input {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0;
  }
}

/* Off-canvas mobile header and sidebar */
.mobile-header { display:none; align-items:center; justify-content:space-between; padding:10px 12px; background:#0f172a; border-bottom:1px solid #1f2937; position:sticky; top:0; z-index:40; }
.backdrop { position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:35; }
.sidebar { transition: transform .2s ease; }
.sidebar.open { transform: translateX(0); box-shadow:0 10px 30px rgba(0,0,0,.45); }

/* Bottom tab bar */
.bottom-tabs { display:none; position:sticky; bottom:0; left:0; right:0; background:#0f172a; border-top:1px solid #1f2937; justify-content:space-around; padding:8px; z-index:40; min-height: var(--bottom-tabs-height); box-sizing: border-box; }
.bottom-tabs a { color:#e2e8f0; text-decoration:none; padding:8px 10px; border-radius:8px; font-size:14px; display:flex; align-items:center; }
.bottom-tabs a.active, .bottom-tabs a:hover { background:#1d4ed8; color:#fff; }

@media (max-width: 1024px) {
  .mobile-header { display:flex; }
  .sidebar { position: fixed; top:0; bottom:0; left:0; width: 78%; max-width:300px; transform: translateX(-100%); z-index: 36; }
  .sidebar .nav { flex-direction: column; gap: 8px; overflow: auto; white-space: normal; height: calc(100% - 62px); }
  .bottom-tabs { display:flex; }
  .content { padding-bottom: calc(var(--bottom-tabs-height) + 24px); }
}

/* Sticky action bar: always sticky across breakpoints */
.sticky-actions { position: sticky; bottom: calc(var(--bottom-tabs-height) + 12px); background: rgba(15,19,23,.85); backdrop-filter: blur(6px); padding: 10px; border-radius: 12px; border:1px solid #273140; display:flex; gap:8px; }
@media (max-width: 640px) { .sticky-actions .btn { width: 100%; } }
@media (min-width: 641px) { .sticky-actions { bottom: 12px; } }

.hide-on-mobile { display:block; }
.cards-mobile { display:none; }
@media (max-width: 640px) {
  .hide-on-mobile { display:none; }
  .cards-mobile { display:block; }
}

/* Accordions / Collapsibles */
details.accordion { border:1px solid #273140; border-radius:12px; background:#0f1418; box-shadow:0 1px 3px rgba(0,0,0,.25); overflow:hidden; }
details.accordion + details.accordion { margin-top: 10px; }
details.accordion > summary { list-style:none; cursor:pointer; padding:12px 14px; background:#10161b; font-weight:800; color:#e8eef4; }
details.accordion[open] > summary { border-bottom:1px solid #273140; }
details.accordion .accordion-body { padding:12px; }

/* Responsive data pairs inside cards */
.data-pairs { display:flex; flex-wrap:wrap; gap:12px; font-size:14px; }
.data-pairs .pair { min-width: 140px; flex:1 1 140px; background:#1b1f2a; border:1px solid #2a3040; border-radius:10px; padding:10px 12px; }
.data-pairs .pair strong { color:#cbd5e1; }
/* Ensure numeric values align right in pairs if desired */
.data-pairs .pair[style*='text-align:right'] div { text-align:right; }

/* Touch friendly large buttons on mobile */
@media (max-width: 640px) {
  .btn { min-height: 48px; padding: 14px 18px; border-radius: 14px; }
  .card { border-radius:16px; }
}

/* Print styles for 80mm receipt */
@media print {
  @page { size: 80mm auto; margin: 0; }
  body { background: #fff !important; }
  .layout, .sidebar, .mobile-header, .bottom-tabs { display: none !important; }
  .page, .content { padding: 0 !important; }
  .print-receipt { width: 80mm; margin: 0 auto; color: #000; }
  .print-receipt .card, .print-receipt .card-header, .print-receipt .card-body { background: #fff; border: 0; box-shadow: none; padding: 0; }
  .print-receipt h1, .print-receipt h2, .print-receipt h3, .print-receipt .text-xl, .print-receipt .font-bold { font-weight: 700; color:#000; }
  .print-receipt table { width: 100%; border-collapse: collapse; font-size: 12px; }
  .print-receipt th, .print-receipt td { border: 0; padding: 2px 0; text-align: left; }
  .no-print { display: none !important; }
}

/* Mobile: keep selects and dropdowns full-width inside Add Purchase form only */
@media (max-width: 640px) {
  .purchase-add-form select,
  .purchase-add-form .input,
  .purchase-add-form .ui-dropdown {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0;
  }
}
